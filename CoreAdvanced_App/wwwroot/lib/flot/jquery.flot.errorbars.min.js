!function(m){function e(r,e,n,o){var a,i;e.points.errorbars&&(a=[{x:!0,number:!0,required:!0},{y:!0,number:!0,required:!0}],"x"!==(i=e.points.errorbars)&&"xy"!==i||(e.points.xerr.asymmetric&&a.push({x:!0,number:!0,required:!0}),a.push({x:!0,number:!0,required:!0})),"y"!==i&&"xy"!==i||(e.points.yerr.asymmetric&&a.push({y:!0,number:!0,required:!0}),a.push({y:!0,number:!0,required:!0})),o.format=a)}function P(r,e,n,o,a,i,p,t,s,l,u){o+=l,a+=l,i+=l,"x"===e.err?(n+s<a?x(r,[[a,o],[Math.max(n+s,u[0]),o]]):p=!1,i<n-s?x(r,[[Math.min(n-s,u[1]),o],[i,o]]):t=!1):(a<o-s?x(r,[[n,a],[n,Math.min(o-s,u[0])]]):p=!1,o+s<i?x(r,[[n,Math.max(o+s,u[1])],[n,i]]):t=!1),s=null!=e.radius?e.radius:s,p&&("-"===e.upperCap?"x"===e.err?x(r,[[a,o-s],[a,o+s]]):x(r,[[n-s,a],[n+s,a]]):m.isFunction(e.upperCap)&&("x"===e.err?e.upperCap(r,a,o,s):e.upperCap(r,n,a,s))),t&&("-"===e.lowerCap?"x"===e.err?x(r,[[i,o-s],[i,o+s]]):x(r,[[n-s,i],[n+s,i]]):m.isFunction(e.lowerCap)&&("x"===e.err?e.lowerCap(r,i,o,s):e.lowerCap(r,n,i,s)))}function x(r,e){r.beginPath(),r.moveTo(e[0][0],e[0][1]);for(var n=1;n<e.length;n++)r.lineTo(e[n][0],e[n][1]);r.stroke()}function n(r,n){var e=r.getPlotOffset();n.save(),n.translate(e.left,e.top),m.each(r.getData(),function(r,e){e.points.errorbars&&(e.points.xerr.show||e.points.yerr.show)&&function(r,e){var n,o=e.datapoints.points,a=e.datapoints.pointsize,i=[e.xaxis,e.yaxis],p=e.points.radius,t=[e.points.xerr,e.points.yerr],s=!1;i[0].p2c(i[0].max)<i[0].p2c(i[0].min)&&(s=!0,n=t[0].lowerCap,t[0].lowerCap=t[0].upperCap,t[0].upperCap=n);var l=!1;i[1].p2c(i[1].min)<i[1].p2c(i[1].max)&&(l=!0,n=t[1].lowerCap,t[1].lowerCap=t[1].upperCap,t[1].upperCap=n);for(var u,m,x,c,h,y,d,w,C,b=0;b<e.datapoints.points.length;b+=a)for(var f=(m=b,C=w=d=y=h=c=x=void 0,x=(u=e).datapoints.points,d=y=h=c=null,w=u.points.xerr,C=u.points.yerr,"x"===(u=u.points.errorbars)||"xy"===u?w.asymmetric?(c=x[m+2],h=x[m+3],"xy"===u&&(C.asymmetric?(y=x[m+4],d=x[m+5]):y=x[m+4])):(c=x[m+2],"xy"===u&&(C.asymmetric?(y=x[m+3],d=x[m+4]):y=x[m+3])):"y"===u&&(C.asymmetric?(y=x[m+2],d=x[m+3]):y=x[m+2]),null==h&&(h=c),null==d&&(d=y),d=[c,h,y,d],w.show||(d[0]=null,d[1]=null),C.show||(d[2]=null,d[3]=null),d),g=0;g<t.length;g++){var v,k,q,S,M,W,z,D,F=[i[g].min,i[g].max];f[g*t.length]&&(q=[v=o[b],k=o[b+1]][g]+f[g*t.length+1],S=[v,k][g]-f[g*t.length],"x"===t[g].err&&(k>i[1].max||k<i[1].min||q<i[0].min||S>i[0].max)||"y"===t[g].err&&(v>i[0].max||v<i[0].min||q<i[1].min||S>i[1].max)||(W=M=!0,q>F[1]&&(M=!1,q=F[1]),S<F[0]&&(W=!1,S=F[0]),("x"===t[g].err&&s||"y"===t[g].err&&l)&&(n=S,S=q,q=n,n=W,W=M,M=n,n=F[0],F[0]=F[1],F[1]=n),v=i[0].p2c(v),k=i[1].p2c(k),q=i[g].p2c(q),S=i[g].p2c(S),F[0]=i[g].p2c(F[0]),F[1]=i[g].p2c(F[1]),z=t[g].lineWidth||e.points.lineWidth,D=(null!=e.points.shadowSize?e.points:e).shadowSize,0<z&&0<D&&(D=D/2,r.lineWidth=D,r.strokeStyle="rgba(0,0,0,0.1)",P(r,t[g],v,k,q,S,M,W,p,D+D/2,F),r.strokeStyle="rgba(0,0,0,0.2)",P(r,t[g],v,k,q,S,M,W,p,D/2,F)),r.strokeStyle=t[g].color||e.color,r.lineWidth=z,P(r,t[g],v,k,q,S,M,W,p,0,F)))}}(n,e)}),n.restore()}m.plot.plugins.push({init:function(r){r.hooks.processRawData.push(e),r.hooks.draw.push(n)},options:{series:{points:{errorbars:null,xerr:{err:"x",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null},yerr:{err:"y",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null}}}},name:"errorbars",version:"1.0"})}(jQuery);